import pygame
import os
from PIL import Image

def play_gif_animation(gif_folder, screen, center, frame_delay=5):

    gif_files = [f for f in os.listdir(gif_folder) if f.lower().endswith('.gif')]
    for filename in gif_files:
        gif_path = os.path.join(gif_folder, filename)
        png_name = os.path.splitext(filename)[0] + ".png"
        png_path = os.path.join(gif_folder, png_name)
        if not os.path.exists(png_path):
            with Image.open(gif_path) as img:
                img = img.convert("RGBA")
                img.save(png_path)

    
    frame_files = sorted([f for f in os.listdir(gif_folder) if f.lower().endswith('.png')])
    if not frame_files:
        raise RuntimeError("No PNG frames found in gif_folder!")
    frames = [pygame.image.load(os.path.join(gif_folder, f)).convert_alpha() for f in frame_files]

   
    current_frame = 0
    frame_counter = 0
    animating = True
    clock = pygame.time.Clock()

    
    while animating:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
                exit()

        frame_counter += 1
        if frame_counter >= frame_delay:
            frame_counter = 0
            if current_frame < len(frames) - 1:
                current_frame += 1
            else:
                animating = False

        screen.fill((30, 30, 30)) 
        frame_rect = frames[current_frame].get_rect(center=center)
        screen.blit(frames[current_frame], frame_rect)
        pygame.display.flip()
        clock.tick(60)
